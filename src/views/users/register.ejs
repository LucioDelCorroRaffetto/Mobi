<%-include('../partials/headForm.ejs')%>

<%-include('../partials/header.ejs')%>

    <main>
        <div class="login-container">
        <form class="login-form" action="/users/register" method="POST" enctype="multipart/form-data">
            <p class="heading">Registro</p>
            <p class="paragraph">Registra tu cuenta</p>

            <div class="input-group">
                <label for="nombre">Nombre</label>
                <input
                    required
                    placeholder="Ingresa tu nombre"
                    name="nombre"
                    id="nombre"
                    type="text"
                    maxlength="100"
                    value="<%= locals.nombre ? nombre : '' %>"
                />
                <% if(locals.errores && locals.errores.nombre) { %>
                    <p class="error-msg"><%= errores.nombre.msg %></p>
                <% } %>
            </div>

            <div class="input-group">
                <label for="apellido">Apellido</label>
                <input
                    required
                    placeholder="Ingresa tu apellido"
                    name="apellido"
                    id="apellido"
                    type="text"
                    maxlength="100"
                    value="<%= locals.apellido ? apellido : '' %>"
                />
                <% if(locals.errores && locals.errores.apellido) { %>
                    <p class="error-msg"><%= errores.apellido.msg %></p>
                <% } %>
            </div>

            <div class="input-group">
                <label for="email">Correo Electrónico</label>
                <input
                    required
                    placeholder="ejemplo@email.com"
                    name="email"
                    id="email"
                    type="email"
                    maxlength="255"
                    value="<%= locals.email ? email : '' %>"
                />
                <% if(locals.errores && locals.errores.email) { %>
                    <p class="error-msg"><%= errores.email.msg %></p>
                <% } %>
            </div>

            <div class="input-group">
                <label for="password">Contraseña</label>
                <input
                    required
                    placeholder="Ingresa tu contraseña"
                    name="password"
                    id="password"
                    type="password"
                    maxlength="255"
                    value="<%= locals.password ? password : '' %>"
                />
                <% if(locals.errores && locals.errores.password) { %>
                    <p class="error-msg"><%= errores.password.msg %></p>
                <% } %>
            </div>

            <div class="input-group">
                <label for="telefono">Teléfono</label>
                <input
                    placeholder="Ingresa tu teléfono"
                    name="telefono"
                    id="telefono"
                    type="tel"
                    maxlength="20"
                    value="<%= locals.telefono ? telefono : '' %>"
                />
                <% if(locals.errores && locals.errores.telefono) { %>
                    <p class="error-msg"><%= errores.telefono.msg %></p>
                <% } %>
            </div>

            <div class="input-group">
                <label for="tipo">Tipo de Usuario</label>
                <select name="tipo" id="tipo" required>
                    <option value="cliente" <%= locals.tipo === 'cliente' ? 'selected' : '' %>>Cliente</option>
                    <option value="agente" <%= locals.tipo === 'agente' ? 'selected' : '' %>>Agente</option>
                </select>
                <% if(locals.errores && locals.errores.tipo) { %>
                    <p class="error-msg"><%= errores.tipo.msg %></p>
                <% } %>
            </div>

            <div class="input-group">
                <label for="image">Imagen de Perfil</label>
                <input
                    type="file"
                    name="image"
                    id="image"
                    accept="image/*"
                />
                <% if(locals.errores && locals.errores.image) { %>
                    <p class="error-msg"><%= errores.image.msg %></p>
                <% } %>
            </div>

            <button type="submit" class="submit-btn">Registrarse</button>
            
            <div class="bottom-text">
                <p class="account">¿Ya tienes una cuenta? <a href="/users/login">Iniciar Sesión</a></p>
            </div>
        </form>
        </div>
    </main>

    <%-include('../partials/footer.ejs')%>

    <!-- Scripts -->
    <script src="/javascripts/home.js"></script>
    <script>
        document.getElementById("input").addEventListener("change", changeTheme);
    </script>
</html>