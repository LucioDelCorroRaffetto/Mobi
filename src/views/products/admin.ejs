<%- include('../partials/headAdmin') %>
<%- include('../partials/header') %>
<h1>Administración de Productos</h1>
<a href="/admin/add">Agregar Producto</a>
<table>
  <thead>
    <tr>
        <th>Imagen</th>
        <th>Dirección</th>
        <th>Barrio</th>
        <th>Categoría</th>
        <th>Ambientes</th>
        <th>Precio</th>
        <th>Acciones</th>
    </tr>
  </thead>
  <tbody>
    <% if (locals.products && products.length > 0) { %>
      <% products.forEach(product => { %>
        <tr>
          <td><img src="<%= product.foto || '/images/default.jpg' %>" alt="<%= product.direccion %>" width="100"></td>
          <td><%= product.direccion %></td>
          <td><%= product.barrio %></td>
          <td><%= product.tipo %></td>
          <td><%= product.ambientes %></td>
          <td>$<%= product.precio.toLocaleString('es-AR') %></td>
          <td>
            <div class="product-actions">
              <a href="/inmuebles/products/<%= product.id %>/edit" class="btn-detail">Editar</a>
              <form action="/inmuebles/products/<%= product.id %>?_method=DELETE" method="POST" style="display: inline;">
                <button type="submit" class="btn-delete">Eliminar</button>
              </form>
            </div>
          </td>
        </tr>
      <% }); %>
    <% } else { %>
      <tr>
        <td colspan="7">No hay productos disponibles</td>
      </tr>
    <% } %>
  </tbody>
</table>
<%- include('../partials/footer') %>
<script src="/javascripts/home.js"></script>
<script>
    document.addEventListener('DOMContentLoaded', function() {
        const themeToggle = document.getElementById("input");
        if (themeToggle) {
            themeToggle.addEventListener("change", changeTheme);
        }
    });
</script>